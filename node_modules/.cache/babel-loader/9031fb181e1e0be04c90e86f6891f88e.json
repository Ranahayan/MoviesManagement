{"ast":null,"code":"var _jsxFileName = \"/home/abdulhayan/stack/mern/react/practice/vidly/src/Movies/Movie.jsx\";\nimport React, { Component } from \"react\";\nimport ListGroup from \"../common/groupList/groupList\";\nimport Like from \"../common/like/like\";\nimport Pagination from \"../common/pagination/pagination\";\nimport Table from \"../Table/table\";\nimport { getMovies } from \"./fakeMovieService\";\nimport _ from \"lodash\";\nimport { Link } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Movies extends Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      movies: [],\n      pageSize: 4,\n      start: 0,\n      end: 4,\n      genreName: \"All Geners\",\n      searchQuery: \"\",\n      sortColumn: {\n        path: \"title\",\n        method: \"asc\"\n      }\n    };\n\n    this.handleGener = name => {\n      this.setState({\n        genreName: name,\n        start: 0,\n        end: 4\n      });\n      this.setState({\n        searchQuery: \"\"\n      });\n    };\n\n    this.handleFavourite = movie => {\n      let movies = [...this.state.movies];\n      let index = movies.indexOf(movie);\n      movies[index] = { ...movie\n      };\n\n      if (movies[index].favourite === true) {\n        movies[index].favourite = false;\n      } else {\n        movies[index].favourite = true;\n      }\n\n      this.setState({\n        movies\n      });\n    };\n\n    this.handleRange = decider => {\n      let start = decider * 4;\n      let end = start + 4;\n      this.setState({\n        start: start,\n        end: end\n      });\n    };\n\n    this.handleSort = sortColumn => {\n      this.setState({\n        sortColumn\n      });\n    };\n\n    this.handleRenderStatements = () => {\n      let filtered;\n\n      if (this.state.searchQuery === \"\") {\n        filtered = this.state.genreName === \"All Geners\" ? this.state.movies : this.state.movies.filter(movie => movie.genre.name === this.state.genreName);\n      } else {\n        filtered = this.state.movies.filter(movie => movie.title.toLowerCase().includes(this.state.searchQuery.toLowerCase()));\n      }\n\n      let sorted = _.orderBy(filtered, [this.state.sortColumn.path], [this.state.sortColumn.method]);\n\n      return sorted;\n    };\n\n    this.handleSearch = event => {\n      this.setState({\n        searchQuery: event.target.value,\n        start: 0,\n        end: 4\n      });\n    };\n\n    this.hanndleDeleteMovie = movieID => {\n      let Movies = this.state.movies;\n      let index = Movies.findIndex(movie => movie._id === movieID);\n      Movies.splice(index, 1);\n      this.setState({\n        movies: Movies\n      }); //Alternate\n      // let Movies = this.state.movies.filter(m => m._id !== movieID);\n      // this.setState({movies: Movies});\n    };\n  }\n\n  componentDidMount() {\n    this.setState({\n      movies: getMovies()\n    });\n  }\n\n  render() {\n    let sorted = this.handleRenderStatements();\n    console.log(sorted);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container m-5\",\n      children: this.state.movies.length !== 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-2\",\n          children: /*#__PURE__*/_jsxDEV(ListGroup, {\n            onGenere: this.handleGener,\n            genrename: this.state.genreName,\n            searchQuery: this.state.searchQuery\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-10\",\n          children: [/*#__PURE__*/_jsxDEV(Link, {\n            to: \"/movies/new\",\n            data: {\n              myfunction: this.handleNewMovie\n            },\n            className: \"btn btn-primary\",\n            children: \"New Movie\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Showing \", sorted.length, \" movies from the database \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              value: this.state.searchQuery,\n              onChange: this.handleSearch,\n              type: \"text\",\n              placeholder: \"Search\",\n              className: \"form-control\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 102,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Table, {\n            movies: sorted,\n            start: this.state.start,\n            end: this.state.end,\n            onDelete: this.hanndleDeleteMovie,\n            onFavourite: this.handleFavourite,\n            onSort: this.handleSort,\n            sortColumn: this.state.sortColumn\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Pagination, {\n            pageSize: this.state.pageSize,\n            totalMovies: sorted.length,\n            onPageClick: this.handleRange,\n            pageSelected: this.state.start\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"There are no movies in DataBase\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default Movies;","map":{"version":3,"names":["React","Component","ListGroup","Like","Pagination","Table","getMovies","_","Link","Movies","state","movies","pageSize","start","end","genreName","searchQuery","sortColumn","path","method","handleGener","name","setState","handleFavourite","movie","index","indexOf","favourite","handleRange","decider","handleSort","handleRenderStatements","filtered","filter","genre","title","toLowerCase","includes","sorted","orderBy","handleSearch","event","target","value","hanndleDeleteMovie","movieID","findIndex","_id","splice","componentDidMount","render","console","log","length","myfunction","handleNewMovie"],"sources":["/home/abdulhayan/stack/mern/react/practice/vidly/src/Movies/Movie.jsx"],"sourcesContent":["import React, { Component } from \"react\";\nimport ListGroup from \"../common/groupList/groupList\";\nimport Like from \"../common/like/like\";\nimport Pagination from \"../common/pagination/pagination\";\nimport Table from \"../Table/table\";\nimport { getMovies } from \"./fakeMovieService\";\nimport _ from \"lodash\";\nimport { Link } from \"react-router-dom\";\n\nclass Movies extends Component {\n  state = {\n    movies: [],\n    pageSize: 4,\n    start: 0,\n    end: 4,\n    genreName: \"All Geners\",\n    searchQuery: \"\",\n    sortColumn: { path: \"title\", method: \"asc\" },\n  };\n\n  componentDidMount() {\n    this.setState({ movies: getMovies() });\n  }\n\n  handleGener = (name) => {\n    this.setState({ genreName: name, start: 0, end: 4 });\n    this.setState({ searchQuery: \"\" });\n  };\n\n  handleFavourite = (movie) => {\n    let movies = [...this.state.movies];\n    let index = movies.indexOf(movie);\n    movies[index] = { ...movie };\n    if (movies[index].favourite === true) {\n      movies[index].favourite = false;\n    } else {\n      movies[index].favourite = true;\n    }\n    this.setState({ movies });\n  };\n\n  handleRange = (decider) => {\n    let start = decider * 4;\n    let end = start + 4;\n    this.setState({ start: start, end: end });\n  };\n\n  handleSort = (sortColumn) => {\n    this.setState({ sortColumn });\n  };\n\n  handleRenderStatements = () => {\n    let filtered;\n    if (this.state.searchQuery === \"\") {\n      filtered =\n        this.state.genreName === \"All Geners\"\n          ? this.state.movies\n          : this.state.movies.filter(\n              (movie) => movie.genre.name === this.state.genreName\n            );\n    } else {\n      filtered = this.state.movies.filter((movie) =>\n        movie.title.toLowerCase().includes(this.state.searchQuery.toLowerCase())\n      );\n    }\n\n    let sorted = _.orderBy(\n      filtered,\n      [this.state.sortColumn.path],\n      [this.state.sortColumn.method]\n    );\n    return sorted;\n  };\n\n  handleSearch = (event) => {\n    this.setState({ searchQuery: event.target.value, start: 0, end: 4 });\n  };\n\n  render() {\n    let sorted = this.handleRenderStatements();    console.log(sorted);\n    return (\n      <div className=\"container m-5\">\n        {this.state.movies.length !== 0 ? (\n          <div className=\"row\">\n            <div className=\"col-2\">\n              <ListGroup\n                onGenere={this.handleGener}\n                genrename={this.state.genreName}\n                searchQuery={this.state.searchQuery}\n              />\n            </div>\n            <div className=\"col-10\">\n              <Link\n                to={\"/movies/new\"}\n                data={{ myfunction: this.handleNewMovie }}\n                className=\"btn btn-primary\"\n              >\n                New Movie\n              </Link>\n              <p>Showing {sorted.length} movies from the database </p>\n              <div className=\"form-group\">\n                <input\n                  value={this.state.searchQuery}\n                  onChange={this.handleSearch}\n                  type=\"text\"\n                  placeholder=\"Search\"\n                  className=\"form-control\"\n                />\n              </div>\n              <Table\n                movies={sorted}\n                start={this.state.start}\n                end={this.state.end}\n                onDelete={this.hanndleDeleteMovie}\n                onFavourite={this.handleFavourite}\n                onSort={this.handleSort}\n                sortColumn={this.state.sortColumn}\n              />\n              <Pagination\n                pageSize={this.state.pageSize}\n                totalMovies={sorted.length}\n                onPageClick={this.handleRange}\n                pageSelected={this.state.start}\n              />\n            </div>\n          </div>\n        ) : (\n          <p>There are no movies in DataBase</p>\n        )}\n      </div>\n    );\n  }\n\n  hanndleDeleteMovie = (movieID) => {\n    let Movies = this.state.movies;\n    let index = Movies.findIndex((movie) => movie._id === movieID);\n    Movies.splice(index, 1);\n    this.setState({ movies: Movies });\n    //Alternate\n    // let Movies = this.state.movies.filter(m => m._id !== movieID);\n    // this.setState({movies: Movies});\n  };\n}\n\nexport default Movies;\n"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,SAAP,MAAsB,+BAAtB;AACA,OAAOC,IAAP,MAAiB,qBAAjB;AACA,OAAOC,UAAP,MAAuB,iCAAvB;AACA,OAAOC,KAAP,MAAkB,gBAAlB;AACA,SAASC,SAAT,QAA0B,oBAA1B;AACA,OAAOC,CAAP,MAAc,QAAd;AACA,SAASC,IAAT,QAAqB,kBAArB;;;AAEA,MAAMC,MAAN,SAAqBR,SAArB,CAA+B;EAAA;IAAA;IAAA,KAC7BS,KAD6B,GACrB;MACNC,MAAM,EAAE,EADF;MAENC,QAAQ,EAAE,CAFJ;MAGNC,KAAK,EAAE,CAHD;MAINC,GAAG,EAAE,CAJC;MAKNC,SAAS,EAAE,YALL;MAMNC,WAAW,EAAE,EANP;MAONC,UAAU,EAAE;QAAEC,IAAI,EAAE,OAAR;QAAiBC,MAAM,EAAE;MAAzB;IAPN,CADqB;;IAAA,KAe7BC,WAf6B,GAedC,IAAD,IAAU;MACtB,KAAKC,QAAL,CAAc;QAAEP,SAAS,EAAEM,IAAb;QAAmBR,KAAK,EAAE,CAA1B;QAA6BC,GAAG,EAAE;MAAlC,CAAd;MACA,KAAKQ,QAAL,CAAc;QAAEN,WAAW,EAAE;MAAf,CAAd;IACD,CAlB4B;;IAAA,KAoB7BO,eApB6B,GAoBVC,KAAD,IAAW;MAC3B,IAAIb,MAAM,GAAG,CAAC,GAAG,KAAKD,KAAL,CAAWC,MAAf,CAAb;MACA,IAAIc,KAAK,GAAGd,MAAM,CAACe,OAAP,CAAeF,KAAf,CAAZ;MACAb,MAAM,CAACc,KAAD,CAAN,GAAgB,EAAE,GAAGD;MAAL,CAAhB;;MACA,IAAIb,MAAM,CAACc,KAAD,CAAN,CAAcE,SAAd,KAA4B,IAAhC,EAAsC;QACpChB,MAAM,CAACc,KAAD,CAAN,CAAcE,SAAd,GAA0B,KAA1B;MACD,CAFD,MAEO;QACLhB,MAAM,CAACc,KAAD,CAAN,CAAcE,SAAd,GAA0B,IAA1B;MACD;;MACD,KAAKL,QAAL,CAAc;QAAEX;MAAF,CAAd;IACD,CA9B4B;;IAAA,KAgC7BiB,WAhC6B,GAgCdC,OAAD,IAAa;MACzB,IAAIhB,KAAK,GAAGgB,OAAO,GAAG,CAAtB;MACA,IAAIf,GAAG,GAAGD,KAAK,GAAG,CAAlB;MACA,KAAKS,QAAL,CAAc;QAAET,KAAK,EAAEA,KAAT;QAAgBC,GAAG,EAAEA;MAArB,CAAd;IACD,CApC4B;;IAAA,KAsC7BgB,UAtC6B,GAsCfb,UAAD,IAAgB;MAC3B,KAAKK,QAAL,CAAc;QAAEL;MAAF,CAAd;IACD,CAxC4B;;IAAA,KA0C7Bc,sBA1C6B,GA0CJ,MAAM;MAC7B,IAAIC,QAAJ;;MACA,IAAI,KAAKtB,KAAL,CAAWM,WAAX,KAA2B,EAA/B,EAAmC;QACjCgB,QAAQ,GACN,KAAKtB,KAAL,CAAWK,SAAX,KAAyB,YAAzB,GACI,KAAKL,KAAL,CAAWC,MADf,GAEI,KAAKD,KAAL,CAAWC,MAAX,CAAkBsB,MAAlB,CACGT,KAAD,IAAWA,KAAK,CAACU,KAAN,CAAYb,IAAZ,KAAqB,KAAKX,KAAL,CAAWK,SAD7C,CAHN;MAMD,CAPD,MAOO;QACLiB,QAAQ,GAAG,KAAKtB,KAAL,CAAWC,MAAX,CAAkBsB,MAAlB,CAA0BT,KAAD,IAClCA,KAAK,CAACW,KAAN,CAAYC,WAAZ,GAA0BC,QAA1B,CAAmC,KAAK3B,KAAL,CAAWM,WAAX,CAAuBoB,WAAvB,EAAnC,CADS,CAAX;MAGD;;MAED,IAAIE,MAAM,GAAG/B,CAAC,CAACgC,OAAF,CACXP,QADW,EAEX,CAAC,KAAKtB,KAAL,CAAWO,UAAX,CAAsBC,IAAvB,CAFW,EAGX,CAAC,KAAKR,KAAL,CAAWO,UAAX,CAAsBE,MAAvB,CAHW,CAAb;;MAKA,OAAOmB,MAAP;IACD,CA/D4B;;IAAA,KAiE7BE,YAjE6B,GAiEbC,KAAD,IAAW;MACxB,KAAKnB,QAAL,CAAc;QAAEN,WAAW,EAAEyB,KAAK,CAACC,MAAN,CAAaC,KAA5B;QAAmC9B,KAAK,EAAE,CAA1C;QAA6CC,GAAG,EAAE;MAAlD,CAAd;IACD,CAnE4B;;IAAA,KA4H7B8B,kBA5H6B,GA4HPC,OAAD,IAAa;MAChC,IAAIpC,MAAM,GAAG,KAAKC,KAAL,CAAWC,MAAxB;MACA,IAAIc,KAAK,GAAGhB,MAAM,CAACqC,SAAP,CAAkBtB,KAAD,IAAWA,KAAK,CAACuB,GAAN,KAAcF,OAA1C,CAAZ;MACApC,MAAM,CAACuC,MAAP,CAAcvB,KAAd,EAAqB,CAArB;MACA,KAAKH,QAAL,CAAc;QAAEX,MAAM,EAAEF;MAAV,CAAd,EAJgC,CAKhC;MACA;MACA;IACD,CApI4B;EAAA;;EAW7BwC,iBAAiB,GAAG;IAClB,KAAK3B,QAAL,CAAc;MAAEX,MAAM,EAAEL,SAAS;IAAnB,CAAd;EACD;;EAwDD4C,MAAM,GAAG;IACP,IAAIZ,MAAM,GAAG,KAAKP,sBAAL,EAAb;IAA+CoB,OAAO,CAACC,GAAR,CAAYd,MAAZ;IAC/C,oBACE;MAAK,SAAS,EAAC,eAAf;MAAA,UACG,KAAK5B,KAAL,CAAWC,MAAX,CAAkB0C,MAAlB,KAA6B,CAA7B,gBACC;QAAK,SAAS,EAAC,KAAf;QAAA,wBACE;UAAK,SAAS,EAAC,OAAf;UAAA,uBACE,QAAC,SAAD;YACE,QAAQ,EAAE,KAAKjC,WADjB;YAEE,SAAS,EAAE,KAAKV,KAAL,CAAWK,SAFxB;YAGE,WAAW,EAAE,KAAKL,KAAL,CAAWM;UAH1B;YAAA;YAAA;YAAA;UAAA;QADF;UAAA;UAAA;UAAA;QAAA,QADF,eAQE;UAAK,SAAS,EAAC,QAAf;UAAA,wBACE,QAAC,IAAD;YACE,EAAE,EAAE,aADN;YAEE,IAAI,EAAE;cAAEsC,UAAU,EAAE,KAAKC;YAAnB,CAFR;YAGE,SAAS,EAAC,iBAHZ;YAAA;UAAA;YAAA;YAAA;YAAA;UAAA,QADF,eAQE;YAAA,uBAAYjB,MAAM,CAACe,MAAnB;UAAA;YAAA;YAAA;YAAA;UAAA,QARF,eASE;YAAK,SAAS,EAAC,YAAf;YAAA,uBACE;cACE,KAAK,EAAE,KAAK3C,KAAL,CAAWM,WADpB;cAEE,QAAQ,EAAE,KAAKwB,YAFjB;cAGE,IAAI,EAAC,MAHP;cAIE,WAAW,EAAC,QAJd;cAKE,SAAS,EAAC;YALZ;cAAA;cAAA;cAAA;YAAA;UADF;YAAA;YAAA;YAAA;UAAA,QATF,eAkBE,QAAC,KAAD;YACE,MAAM,EAAEF,MADV;YAEE,KAAK,EAAE,KAAK5B,KAAL,CAAWG,KAFpB;YAGE,GAAG,EAAE,KAAKH,KAAL,CAAWI,GAHlB;YAIE,QAAQ,EAAE,KAAK8B,kBAJjB;YAKE,WAAW,EAAE,KAAKrB,eALpB;YAME,MAAM,EAAE,KAAKO,UANf;YAOE,UAAU,EAAE,KAAKpB,KAAL,CAAWO;UAPzB;YAAA;YAAA;YAAA;UAAA,QAlBF,eA2BE,QAAC,UAAD;YACE,QAAQ,EAAE,KAAKP,KAAL,CAAWE,QADvB;YAEE,WAAW,EAAE0B,MAAM,CAACe,MAFtB;YAGE,WAAW,EAAE,KAAKzB,WAHpB;YAIE,YAAY,EAAE,KAAKlB,KAAL,CAAWG;UAJ3B;YAAA;YAAA;YAAA;UAAA,QA3BF;QAAA;UAAA;UAAA;UAAA;QAAA,QARF;MAAA;QAAA;QAAA;QAAA;MAAA,QADD,gBA6CC;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IA9CJ;MAAA;MAAA;MAAA;IAAA,QADF;EAmDD;;AA1H4B;;AAuI/B,eAAeJ,MAAf"},"metadata":{},"sourceType":"module"}