{"ast":null,"code":"import React, { Component } from \"react\";\nimport Joi from \"joi-browser\";\n\nclass ReuseAbleForm extends Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      data: {},\n      errors: {}\n    };\n\n    this.handleForm = event => {\n      event.preventDefault();\n      const errors = this.handleErrors();\n      this.setState(errors || {});\n      console.log(errors);\n      if (errors) return;\n      this.doSubmit();\n    };\n\n    this.handleErrors = () => {\n      const {\n        error\n      } = Joi.validate(this.state.data, this.schema, {\n        abortEarly: false\n      });\n      console.log(error);\n      if (!error) return null;\n      const errors = {};\n\n      for (let item of error.details) {\n        errors[item.path[0]] = item.message;\n      }\n\n      return errors;\n    };\n\n    this.handleOnChange = _ref => {\n      let {\n        currentTarget: input\n      } = _ref;\n      let errors = { ...this.state.errors\n      };\n      let newMessage = this.handleOnSaveErrors(input);\n      if (newMessage) errors[input.name] = newMessage;else delete errors[input.name];\n      let value = input.value;\n      let data = { ...this.state.data\n      };\n      data[input.name] = value;\n      this.setState({\n        data,\n        errors\n      });\n    };\n\n    this.handleOnSaveErrors = _ref2 => {\n      let {\n        name,\n        value\n      } = _ref2;\n      const toBeValidate = {\n        [name]: value\n      };\n      const OnSaveSchema = {\n        [name]: this.schema[name]\n      };\n      const {\n        error\n      } = Joi.validate(toBeValidate, OnSaveSchema);\n      console.log(error);\n      return error ? error.details[0].message : null;\n    };\n  }\n\n}\n\nexport default ReuseAbleForm;","map":{"version":3,"names":["React","Component","Joi","ReuseAbleForm","state","data","errors","handleForm","event","preventDefault","handleErrors","setState","console","log","doSubmit","error","validate","schema","abortEarly","item","details","path","message","handleOnChange","currentTarget","input","newMessage","handleOnSaveErrors","name","value","toBeValidate","OnSaveSchema"],"sources":["/home/abdulhayan/stack/mern/react/practice/vidly/src/common/login/ReuseableForm.jsx"],"sourcesContent":["import React, { Component } from \"react\";\nimport Joi from \"joi-browser\";\n\n\nclass ReuseAbleForm extends Component {\n    state = { \n        data: {},\n        errors: {}\n     } \n\n\n  handleForm = (event) => {\n    event.preventDefault();\n    const errors = this.handleErrors();\n    this.setState(errors || {});\n    console.log(errors);\n    if (errors) return;\n    this.doSubmit();\n  };\n \n     handleErrors = () => {\n        const { error } = Joi.validate(this.state.data, this.schema, {\n          abortEarly: false,\n        });\n        console.log(error);\n        if (!error) return null;\n        const errors = {};\n        for (let item of error.details) {\n          errors[item.path[0]] = item.message;\n        }\n        return errors;\n      };\n\n      handleOnChange = ({ currentTarget: input }) => {\n        let errors = { ...this.state.errors };\n        let newMessage = this.handleOnSaveErrors(input);\n        if (newMessage) errors[input.name] = newMessage;\n        else delete errors[input.name];\n        let value = input.value;\n        let data = { ...this.state.data };\n        data[input.name] = value;\n        this.setState({ data, errors });\n      };\n    \n\n      handleOnSaveErrors = ({ name, value }) => {\n        const toBeValidate = { [name]: value };\n        const OnSaveSchema = { [name]: this.schema[name] };\n        const { error } = Joi.validate(toBeValidate, OnSaveSchema);\n        console.log(error);\n        return error ? error.details[0].message : null;\n      };\n}\n \nexport default ReuseAbleForm;"],"mappings":"AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,GAAP,MAAgB,aAAhB;;AAGA,MAAMC,aAAN,SAA4BF,SAA5B,CAAsC;EAAA;IAAA;IAAA,KAClCG,KADkC,GAC1B;MACJC,IAAI,EAAE,EADF;MAEJC,MAAM,EAAE;IAFJ,CAD0B;;IAAA,KAOpCC,UAPoC,GAOtBC,KAAD,IAAW;MACtBA,KAAK,CAACC,cAAN;MACA,MAAMH,MAAM,GAAG,KAAKI,YAAL,EAAf;MACA,KAAKC,QAAL,CAAcL,MAAM,IAAI,EAAxB;MACAM,OAAO,CAACC,GAAR,CAAYP,MAAZ;MACA,IAAIA,MAAJ,EAAY;MACZ,KAAKQ,QAAL;IACD,CAdmC;;IAAA,KAgBjCJ,YAhBiC,GAgBlB,MAAM;MAClB,MAAM;QAAEK;MAAF,IAAYb,GAAG,CAACc,QAAJ,CAAa,KAAKZ,KAAL,CAAWC,IAAxB,EAA8B,KAAKY,MAAnC,EAA2C;QAC3DC,UAAU,EAAE;MAD+C,CAA3C,CAAlB;MAGAN,OAAO,CAACC,GAAR,CAAYE,KAAZ;MACA,IAAI,CAACA,KAAL,EAAY,OAAO,IAAP;MACZ,MAAMT,MAAM,GAAG,EAAf;;MACA,KAAK,IAAIa,IAAT,IAAiBJ,KAAK,CAACK,OAAvB,EAAgC;QAC9Bd,MAAM,CAACa,IAAI,CAACE,IAAL,CAAU,CAAV,CAAD,CAAN,GAAuBF,IAAI,CAACG,OAA5B;MACD;;MACD,OAAOhB,MAAP;IACD,CA3B+B;;IAAA,KA6BhCiB,cA7BgC,GA6Bf,QAA8B;MAAA,IAA7B;QAAEC,aAAa,EAAEC;MAAjB,CAA6B;MAC7C,IAAInB,MAAM,GAAG,EAAE,GAAG,KAAKF,KAAL,CAAWE;MAAhB,CAAb;MACA,IAAIoB,UAAU,GAAG,KAAKC,kBAAL,CAAwBF,KAAxB,CAAjB;MACA,IAAIC,UAAJ,EAAgBpB,MAAM,CAACmB,KAAK,CAACG,IAAP,CAAN,GAAqBF,UAArB,CAAhB,KACK,OAAOpB,MAAM,CAACmB,KAAK,CAACG,IAAP,CAAb;MACL,IAAIC,KAAK,GAAGJ,KAAK,CAACI,KAAlB;MACA,IAAIxB,IAAI,GAAG,EAAE,GAAG,KAAKD,KAAL,CAAWC;MAAhB,CAAX;MACAA,IAAI,CAACoB,KAAK,CAACG,IAAP,CAAJ,GAAmBC,KAAnB;MACA,KAAKlB,QAAL,CAAc;QAAEN,IAAF;QAAQC;MAAR,CAAd;IACD,CAtC+B;;IAAA,KAyChCqB,kBAzCgC,GAyCX,SAAqB;MAAA,IAApB;QAAEC,IAAF;QAAQC;MAAR,CAAoB;MACxC,MAAMC,YAAY,GAAG;QAAE,CAACF,IAAD,GAAQC;MAAV,CAArB;MACA,MAAME,YAAY,GAAG;QAAE,CAACH,IAAD,GAAQ,KAAKX,MAAL,CAAYW,IAAZ;MAAV,CAArB;MACA,MAAM;QAAEb;MAAF,IAAYb,GAAG,CAACc,QAAJ,CAAac,YAAb,EAA2BC,YAA3B,CAAlB;MACAnB,OAAO,CAACC,GAAR,CAAYE,KAAZ;MACA,OAAOA,KAAK,GAAGA,KAAK,CAACK,OAAN,CAAc,CAAd,EAAiBE,OAApB,GAA8B,IAA1C;IACD,CA/C+B;EAAA;;AAAA;;AAkDtC,eAAenB,aAAf"},"metadata":{},"sourceType":"module"}